export default async function handler(req, res) {
  if (req.method !== "POST") return res.status(405).json({ error: "Method not allowed" });

  const { mode, aKin, aBeast, aBranch, bKin, bBeast, bBranch, scene } = req.body;

  // ğŸ”¹ æ¨¡æ“¬ AI å›å‚³æ ¼å¼
  const textTemplates = {
    work: `ğŸ‰ ${aBeast}${aBranch} ä¸Šå¸ VS ${bBeast || "â€”"}${bBranch || "â€”"} ä¸‹å±¬
é›™å±¤è§’è‰²è¨­å®š
â€¢ ${aBeast}ç‰¹è³ªï¼šå¼·å‹¢æœæ–·ï¼Œé‡è¦–æ•ˆç‡ã€‚
â€¢ ${aBranch}ç‰¹è³ªï¼šæœ‰é‡å¿ƒï¼Œé‡è¦–é•·é è¦åŠƒã€‚
äº’å‹•æ¨¡å¼åˆ†æï¼š...ï¼ˆAI ç”Ÿæˆçš„è©³ç´°æè¿°ï¼‰
é«˜å±è¡çªé»ï¼š...  
âœ… é›™å‘æ‡‰å°ç­–ç•¥ï¼š...`,
    love: `${aBeast}${aBranch} èˆ‡ ${bBeast || "â€”"}${bBranch || "â€”"} æ„›æƒ…äº’å‹•åˆ†æ
â€¢ æƒ…æ„ŸæŒ‡æ•¸ï¼š8.5/10
â€¢ äº’å‹•æ¨¡å¼ï¼šæµªæ¼« vs ç†æ€§
â€¢ æ„›æƒ…é™·é˜±ï¼šéåº¦ä¾è³´ / å†·æ·¡çŸ›ç›¾
â€¢ æœ€ä½³ç›¸è™•ï¼šä¿æŒå„€å¼æ„Ÿ + æºé€š`,
    sex: `${aBeast}${aBranch} X ${bBeast || "â€”"}${bBranch || "â€”"} æ€§æ„›åˆ†æ
â€¢ æƒ…æ„›æŒ‡æ•¸ï¼š9/10
â€¢ äº’å‹•æ¨¡å¼ï¼šæŒ‘é€—èˆ‡æŒæ§çš„éŠæˆ²
â€¢ æ¨è–¦é«”ä½ï¼šäº¤éŒ¯å¾Œå…¥ / ç¿»è½‰é¨ä¹˜
â€¢ æƒ…è¶£æ¨è–¦ï¼šèªéŸ³æ§åˆ¶ç©å…· + è•¾çµ²é¦¬ç”²
â€¢ æœ€ä½³å ´æ™¯ï¼šç§äººéŠæˆ²å®¤`,
    social: `${aBeast}${aBranch} èˆ‡ ${bBeast || "â€”"}${bBranch || "â€”"} äººéš›äº’å‹•
â€¢ äººéš›é—œéµï¼šä¿¡ä»»ã€èª æ‡‡ã€åˆä½œ
â€¢ å®¹æ˜“æ‘©æ“¦ï¼šèª°ä¸»å°æºé€š
â€¢ å»ºè­°ï¼šå¤šè®šç¾å°æ–¹ï¼Œæ¸›å°‘ç«¶çˆ­å¿ƒ`,
    personality: `${aBeast}${aBranch}ï¼ˆ${aKin}ï¼‰å€‹æ€§åˆ†æ
â€¢ å„ªé»ï¼šæœ‰é ˜å°åŠ›ã€åŸ·è¡ŒåŠ›
â€¢ ç¼ºé»ï¼šæ˜“è¡å‹•ã€è€æ€§ä¸è¶³
â€¢ é©åˆç™¼æ®ï¼šéœ€è¦é€Ÿåº¦èˆ‡è¡Œå‹•çš„å ´åˆ`
  };

  // ğŸ”¹ æ¨¡æ“¬é›·é”åˆ†æ•¸
  const scores = [7, 8, 6, 9, 7];

  return res.status(200).json({
    text: textTemplates[scene] || "åˆ†æçµæœ",
    scores
  });
}
